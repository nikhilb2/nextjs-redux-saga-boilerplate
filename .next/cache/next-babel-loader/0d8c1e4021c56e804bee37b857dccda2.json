{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/nikhilbhatia/Documents/projects/nextRedux/pages/index.tsx\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\";\n\nvar Index = /*#__PURE__*/function (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  var _super = _createSuper(Index);\n\n  function Index() {\n    _classCallCheck(this, Index);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Index, [{\n    key: \"render\",\n    value: function render() {\n      // console.log('5. Page.render');\n      var _this$props = this.props,\n          pageProp = _this$props.pageProp,\n          appProp = _this$props.appProp,\n          app = _this$props.app,\n          page = _this$props.page;\n      return __jsx(\"div\", {\n        className: \"index\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 7\n        }\n      }, __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 9\n        }\n      }, \"Try to navigate to another page and return back here to see how\", \" \", __jsx(\"code\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }\n      }, \"getInitialProps\"), \" will be used on client side.\"), __jsx(\"pre\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }, JSON.stringify({\n        pageProp: pageProp,\n        appProp: appProp,\n        app: app,\n        page: page\n      }, null, 2)), __jsx(Link, {\n        href: \"/server\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }\n      }, \"Navigate\")), \" | \", __jsx(Link, {\n        href: \"/static\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }\n      }, \"Navigate to static\")), \" | \", __jsx(Link, {\n        href: \"/error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }\n      }, \"Navigate to error\")));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    // note that since _app is wrapped no need to wrap page\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var store, pathname, query, req;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                store = _ref.store, pathname = _ref.pathname, query = _ref.query, req = _ref.req;\n                console.log(\"2. Page.getInitialProps uses the store to dispatch things\", {\n                  pathname: pathname,\n                  query: query\n                });\n\n                if (!req) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 5;\n                return store.dispatch({\n                  type: \"PAGE\",\n                  payload: \"server\"\n                });\n\n              case 5:\n                return _context.abrupt(\"return\", {\n                  pageProp: \"server\"\n                });\n\n              case 6:\n                // await is not needed if action is synchronous\n                store.dispatch({\n                  type: \"PAGE\",\n                  payload: \"client\"\n                }); // Some custom thing for this particular page\n\n                return _context.abrupt(\"return\", {\n                  pageProp: \"client\"\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default connect(function (state) {\n  return state;\n})(Index);","map":{"version":3,"sources":["/Users/nikhilbhatia/Documents/projects/nextRedux/pages/index.tsx"],"names":["React","Link","connect","Index","props","pageProp","appProp","app","page","JSON","stringify","store","pathname","query","req","console","log","dispatch","type","payload","Component","state"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,OAAT,QAAwB,aAAxB;;IASMC,K;;;;;;;;;;;;;6BA4BY;AACd;AADc,wBAE2B,KAAKC,KAFhC;AAAA,UAENC,QAFM,eAENA,QAFM;AAAA,UAEIC,OAFJ,eAEIA,OAFJ;AAAA,UAEaC,GAFb,eAEaA,GAFb;AAAA,UAEkBC,IAFlB,eAEkBA,IAFlB;AAGd,aACE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4EACkE,GADlE,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAFF,kCADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMC,IAAI,CAACC,SAAL,CAAe;AAAEL,QAAAA,QAAQ,EAARA,QAAF;AAAYC,QAAAA,OAAO,EAAPA,OAAZ;AAAqBC,QAAAA,GAAG,EAAHA,GAArB;AAA0BC,QAAAA,IAAI,EAAJA;AAA1B,OAAf,EAAiD,IAAjD,EAAuD,CAAvD,CAAN,CANF,EAQE,MAAC,IAAD;AAAM,QAAA,IAAI,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CARF,EAWG,KAXH,EAYE,MAAC,IAAD;AAAM,QAAA,IAAI,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,CAZF,EAeG,KAfH,EAgBE,MAAC,IAAD;AAAM,QAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CAhBF,CADF;AAsBD;;;AApDD;;;;;;;;AAEEG,gBAAAA,K,QAAAA,K,EACAC,Q,QAAAA,Q,EACAC,K,QAAAA,K,EACAC,G,QAAAA,G;AAEAC,gBAAAA,OAAO,CAACC,GAAR,CAAY,2DAAZ,EAAyE;AACvEJ,kBAAAA,QAAQ,EAARA,QADuE;AAEvEC,kBAAAA,KAAK,EAALA;AAFuE,iBAAzE;;qBAKIC,G;;;;;;uBAEIH,KAAK,CAACM,QAAN,CAAe;AAAEC,kBAAAA,IAAI,EAAE,MAAR;AAAgBC,kBAAAA,OAAO,EAAE;AAAzB,iBAAf,C;;;iDAGC;AAAEd,kBAAAA,QAAQ,EAAE;AAAZ,iB;;;AAGT;AACAM,gBAAAA,KAAK,CAACM,QAAN,CAAe;AAAEC,kBAAAA,IAAI,EAAE,MAAR;AAAgBC,kBAAAA,OAAO,EAAE;AAAzB,iBAAf,E,CAEA;;iDACO;AAAEd,kBAAAA,QAAQ,EAAE;AAAZ,iB;;;;;;;;;;;;;;;;;;;EAzBSL,KAAK,CAACoB,S;;AAwD1B,eAAelB,OAAO,CAAC,UAAAmB,KAAK;AAAA,SAAIA,KAAJ;AAAA,CAAN,CAAP,CAAwBlB,KAAxB,CAAf","sourcesContent":["import React from \"react\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\";\nimport { NextPageContext } from \"next\";\nimport { State } from \"../components/reducer\";\n\nexport interface PageProps extends State {\n  pageProp: string;\n  appProp: string;\n}\n\nclass Index extends React.Component<PageProps> {\n  // note that since _app is wrapped no need to wrap page\n  public static async getInitialProps({\n    store,\n    pathname,\n    query,\n    req\n  }: NextPageContext<State>) {\n    console.log(\"2. Page.getInitialProps uses the store to dispatch things\", {\n      pathname,\n      query\n    });\n\n    if (req) {\n      // All async actions must be await'ed\n      await store.dispatch({ type: \"PAGE\", payload: \"server\" });\n\n      // Some custom thing for this particular page\n      return { pageProp: \"server\" };\n    }\n\n    // await is not needed if action is synchronous\n    store.dispatch({ type: \"PAGE\", payload: \"client\" });\n\n    // Some custom thing for this particular page\n    return { pageProp: \"client\" };\n  }\n\n  public render() {\n    // console.log('5. Page.render');\n    const { pageProp, appProp, app, page } = this.props;\n    return (\n      <div className=\"index\">\n        <p>\n          Try to navigate to another page and return back here to see how{\" \"}\n          <code>getInitialProps</code> will be used on client side.\n        </p>\n\n        <pre>{JSON.stringify({ pageProp, appProp, app, page }, null, 2)}</pre>\n\n        <Link href=\"/server\">\n          <a>Navigate</a>\n        </Link>\n        {\" | \"}\n        <Link href=\"/static\">\n          <a>Navigate to static</a>\n        </Link>\n        {\" | \"}\n        <Link href=\"/error\">\n          <a>Navigate to error</a>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default connect(state => state)(Index);\n"]},"metadata":{},"sourceType":"module"}